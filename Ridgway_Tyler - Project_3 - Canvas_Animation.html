<!doctype html>
<html>
<head>
<title>Test</title>
</head>
<body>
<canvas id="canvasElement" width="800" height="1000">Your browser does not support the Canvas element.</canvas>
		<script>
			var particles = [];
			for( var i = 0; i < 20; i++ ) {
				particles.push( { 
					x:Math.random()*window.innerWidth, 
					y:Math.random()*window.innerHeight, 
					vx:(Math.random()*2)-1, 
					vy:(Math.random()*2-1),
					history: [],
					size: 4+Math.random()*6,
					color: Math.random() > .5 ? "#000000" : Math.random() > .5 ? "#FF0000" : "#4682B4"
				} );
			}
			
			var particles2 = [];
			for( var i = 0; i < 10; i++ ) {
				particles2.push( { 
					x:Math.random()*window.innerWidth, 
					y:Math.random()*window.innerHeight, 
					vx:(Math.random()*2)-1, 
					vy:(Math.random()*2-1),
					history: [],
					size: 4+Math.random()*6,
					color: Math.random() > .5 ? "#000000" : Math.random() > .5 ? "#FF0000" : "#4682B4"
				} );
			}
			
			var particles3 = [];
			for( var i = 0; i < 5; i++ ) {
				particles3.push( { 
					x:Math.random()*window.innerWidth, 
					y:Math.random()*window.innerHeight, 
					vx:(Math.random()*2)-1, 
					vy:(Math.random()*2-1),
					history: [],
					size: 4+Math.random()*6,
					color: Math.random() > .5 ? "#000000" : Math.random() > .5 ? "#FF0000" : "#4682B4"
				} );
			}
			
			var particles4 = [];
			for( var i = 0; i < 1; i++ ) {
				particles4.push( { 
					x:Math.random()*window.innerWidth, 
					y:Math.random()*window.innerHeight, 
					vx:(Math.random()*2)-1, 
					vy:(Math.random()*2-1),
					history: [],
					size: 4+Math.random()*6,
					color: Math.random() > .5 ? "#000000" : Math.random() > .5 ? "#FF0000" : "#4682B4"
				} );
			}
			
			var mouse = { x: 0, y: 0 };
			
			var canvas = document.getElementById('canvasElement');
			
			if (canvas && canvas.getContext) {
				var context = canvas.getContext('2d');
				
				Initialize();
			}
			
			function Initialize() {
				canvas.addEventListener('mousemove', MouseMove, false);
				window.addEventListener('resize', ResizeCanvas, false);
				setInterval( TimeUpdate, 15 );
				setInterval( drawCloud, 15);
				setInterval( drawbubble, 15);
				setInterval( drawbubbles, 15);
				
				
				
				
				context.beginPath();
				
				ResizeCanvas();
			}
			
			function drawCloud(cloud) {
				var colors = ['red', 'green', 'cyan', 'orange', 'purple', 'magenta', 'blue'];
				  for( var i = 0; i < particles2.length; i++ ) {
					particles2[i].x += particles2[i].vx;
					particles2[i].y += particles2[i].vy;
					
					if( particles2[i].x > window.innerWidth ) {
						particles2[i].vx = -1-Math.random();
					}
					else if ( particles2[i].x < 0 ) {
						particles2[i].vx = 1+Math.random();
					}
					else {
						particles2[i].vx *= 1 + (Math.random()*0.005);
					}
					
					if( particles2[i].y > window.innerHeight ) {
						particles2[i].vy = -1-Math.random();
					}
					else if ( particles2[i].y < 0 ) {
						particles2[i].vy = 1+Math.random();
					}
					else {
						particles2[i].vy *= 1 + (Math.random()*0.005);
					}
					
					context.beginPath();
					context.moveTo(particles2[i].x, particles2[i].y);
					context.bezierCurveTo(particles2[i].x-65, particles2[i].y+30, particles2[i].x-65, particles2[i].y+80, particles2[i].x+60, particles2[i].y+80);
					context.bezierCurveTo(particles2[i].x+80, particles2[i].y+40, particles2[i].x+130, particles2[i].y+40, particles2[i].x+130, particles2[i].y+80);
					context.bezierCurveTo(particles2[i].x+200, particles2[i].y+80, particles2[i].x+200, particles2[i].y+40, particles2[i].x+200, particles2[i].y+30);
					context.bezierCurveTo(particles2[i].x+210, particles2[i].y-40, particles2[i].x+200, particles2[i].y+50, particles2[i].x+170, particles2[i].y-85);
					context.bezierCurveTo(particles2[i].x+150, particles2[i].y-75, particles2[i].x+80, particles2[i].y-60, particles2[i].x+80, particles2[i].y-85);
					context.bezierCurveTo(particles2[i].x+30, particles2[i].y-75, particles2[i].x+130, particles2[i].y-60, particles2[i].x, particles2[i].y);
					
					for( var j = 0; j < particles2[i].history.length; j++ ) {
						context.lineTo( particles2[i].history[j].x, particles2[i].history[j].y );
					}
					
					// complete custom shape
					context.closePath();
					context.lineWidth = 2;
					context.strokeStyle = colors[i];
					context.stroke();
					
				}
			}
			
		function drawbubble(e) {	
			for( var i = 0; i < particles3.length; i++ ) {
					particles3[i].x += particles3[i].vx;
					particles3[i].y += particles3[i].vy;
					
					if( particles3[i].x > window.innerWidth ) {
						particles3[i].vx = -1-Math.random();
					}
					else if ( particles3[i].x < 0 ) {
						particles3[i].vx = 1+Math.random();
					}
					else {
						particles3[i].vx *= 1 + (Math.random()*0.005);
					}
					
					if( particles3[i].y > window.innerHeight ) {
						particles3[i].vy = -1-Math.random();
					}
					else if ( particles3[i].y < 0 ) {
						particles3[i].vy = 1+Math.random();
					}
					else {
						particles3[i].vy *= 1 + (Math.random()*0.005);
					}
					
				context.strokeStyle = '#0000FF';
				context.fillStyle = '#FFFF00';
				context.lineWidth = 4;
				context.beginPath();
				context.arc(particles3[i].x, particles3[i].y,50,0*Math.PI,2*Math.PI,true);
				//x: 100; y: 75
				context.closePath();
				context.stroke();
				context.fill();
 
				context.strokeStyle = '#000000';
				context.lineWidth = 2;
				context.beginPath();
				context.arc(particles3[i].x, particles3[i].y-10, 40, 0.2*Math.PI,0.8*Math.PI,false);
				//context.closePath(); 
				context.stroke();
				//context.fill();
				
				context.strokeStyle = '#000000';
				context.fillStyle = '#000000';
				context.beginPath();
				context.arc(particles3[i].x-20, particles3[i].y-15, 5, 0*Math.PI,2*Math.PI,false);
				context.closePath();
				context.stroke();
				context.fill();
 
				context.strokeStyle = '#000000';
				context.fillStyle = '#000000';
				context.beginPath();
				context.arc(particles3[i].x+20, particles3[i].y-15, 5, 0*Math.PI,2*Math.PI,false);
				context.closePath();
				context.stroke();
				context.fill();
				
					for( var j = 0; j < particles3[i].history.length; j++ ) {
						context.lineTo( particles3[i].history[j].x, particles3[i].history[j].y );
					}
			}
		};
			
			function drawbubbles(e) {
				for( var i = 0; i < particles4.length; i++ ) {
						particles4[i].x += particles4[i].vx;
						particles4[i].y += particles4[i].vy;
					
						if( particles4[i].x > window.innerWidth ) {
							particles4[i].vx = -1-Math.random();
						}
						else if ( particles4[i].x < 0 ) {
							particles4[i].vx = 1+Math.random();
						}
						else {
							particles4[i].vx *= 1 + (Math.random()*0.005);
						}
					
						if( particles4[i].y > window.innerHeight ) {
							particles4[i].vy = -1-Math.random();
						}
						else if ( particles4[i].y < 0 ) {
							particles4[i].vy = 1+Math.random();
						}
						else {
							particles4[i].vy *= 1 + (Math.random()*0.005);
						}
						
				context.beginPath();
				//x: 30; y: 25
				context.moveTo(particles4[i].x, particles4[i].y);
				//X1: 25; y1: 25; x2: 25; y2: 62.5
				context.quadraticCurveTo(particles4[i].x-5, particles4[i].y, particles4[i].x-5, particles4[i].y+37.5);
				// 25, 100, 50, 100
				context.quadraticCurveTo(particles4[i].x-5, particles4[i].y+75, particles4[i].x+20, particles4[i].y+75);
				//50, 120, 30, 125
				context.quadraticCurveTo(particles4[i].x+20, particles4[i].y+95, particles4[i].x, particles4[i].y+100);
				//60, 120, 65, 100
				context.quadraticCurveTo(particles4[i].x+30, particles4[i].y+95, particles4[i].x+35, particles4[i].y+75);
				//185, 100, 185, 62.5
				context.quadraticCurveTo(particles4[i].x+155, particles4[i].y+75, particles4[i].x+155, particles4[i].y+37.5);
				//185, 25, 75, 25
				context.quadraticCurveTo(particles4[i].x+155, particles4[i].y, particles4[i].x+45, particles4[i].y);
				//75, 25, 30, 25
				context.quadraticCurveTo(particles4[i].x+45, particles4[i].y, particles4[i].x, particles4[i].y);
				context.textBaseline = 'top';
					context.font = '10pt sans-serif';
					context.fillText('Find all messages!', particles4[i].x, particles4[i].y+5);
				context.stroke();
				context.closePath();
				
				for( var j = 0; j < particles4[i].history.length; j++ ) {
						context.lineTo( particles4[i].history[j].x, particles4[i].history[j].y );
					}
				}
			}	
			
			function TimeUpdate(e) {
				var colors = ['red', 'green', 'cyan', 'orange', 'purple', 'magenta', 'blue'];
				var messages = ['Hello', 'How are you doing?', 'Do you like this?', 'Jon dies in end', 'Found all txt?', 'This might be good...', 'Mesmerizing', 'Find messages!'];
				context.clearRect(0, 0, window.innerWidth, window.innerHeight);
				
				for( var i = 0; i < particles.length; i++ ) {
					particles[i].x += particles[i].vx;
					particles[i].y += particles[i].vy;
					
					if( particles[i].x > window.innerWidth ) {
						particles[i].vx = -1-Math.random();
					}
					else if ( particles[i].x < 0 ) {
						particles[i].vx = 1+Math.random();
					}
					else {
						particles[i].vx *= 1 + (Math.random()*0.005);
					}
					
					if( particles[i].y > window.innerHeight ) {
						particles[i].vy = -1-Math.random();
					}
					else if ( particles[i].y < 0 ) {
						particles[i].vy = 1+Math.random();
					}
					else {
						particles[i].vy *= 1 + (Math.random()*0.005);
					}
					
					context.strokeStyle = colors[i];
					context.beginPath();
					context.moveTo(900, 500);
					context.arc(particles[i].x,particles[i].y,particles[i].size*distanceFactor,0,Math.PI*2,true);
					context.lineTo(100, 100);
					context.closePath();
					for( var j = 0; j < particles[i].history.length; j++ ) {
						context.lineTo( particles[i].history[j].x, particles[i].history[j].y );
					}
					context.stroke();
					
					particles[i].history.push({	x: particles[i].x, y: particles[i].y });
					if( particles[i].history.length > 45 ) {
						particles[i].history.shift();
					}
					
					var distanceFactor = DistanceBetween( mouse, particles[i] );
					distanceFactor = Math.max( Math.min( 15 - ( distanceFactor / 15 ), 10 ), 1 );
					
					var posRelativeToMouse = {
						x: particles.x - mouse.x,
						y: particles.y - mouse.y
					};
					var forceDirection = {
						x: posRelativeToMouse.x / distanceFactor,
						y: posRelativeToMouse.y / distanceFactor,
					};
					var maxDistance = 1000;
					var force = (maxDistance - distanceFactor) / maxDistance;
				
					if (force < 0) {
						force = 0;
					}
					particles.xVel += forceDirection.x * force;
					particles.yVel += forceDirection.y * force;
					
					context.fillStyle = particles[i].color;
					context.beginPath();
					context.arc(particles[i].x,particles[i].y,particles[i].size*distanceFactor,0,Math.PI*2,true);
					context.rect(particles[i].x, particles[i].y, 150, 100);
					context.textBaseline = 'top';
					context.font = '10pt sans-serif';
					context.fillText(messages[i], particles[i].x, particles[i].y);
					context.fillStyle = colors[i];
					context.closePath();
					context.fill();
					
					
				}
			}
			
			
			
			function MouseMove(e) {
				mouse.x = e.clientX;
				mouse.y = e.clientY;
				
				//e = event
				//context.fillRect(e.layerX, e.layerY, 5, 5);
				//Draw( e.layerX, e.layerY );
			}
			
			function Draw( x, y ) {
				context.strokeStyle = '#ff0000';
				context.lineWidth = 2;
				context.lineTo(x, y);
				context.stroke();
			}
			
			function ResizeCanvas(e) {
				canvas.width = window.innerWidth-20;
				canvas.height = window.innerHeight-20;
			}
			
			function DistanceBetween(p1,p2) {
				var dx = p2.x-p1.x;
				var dy = p2.y-p1.y;
				return Math.sqrt(dx*dx + dy*dy);
			}
			</script>
</body>
</html>